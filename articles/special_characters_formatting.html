<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using special characters and formatting • ckbplotr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using special characters and formatting">
<meta property="og:description" content="ckbplotr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ckbplotr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/make_forest_plot.html">Making forest plots</a>
    </li>
    <li>
      <a href="../articles/make_shape_plot.html">Making shape plots</a>
    </li>
    <li>
      <a href="../articles/plot_like_ckb.html">Make a ggplot like a CKB plot</a>
    </li>
    <li>
      <a href="../articles/special_characters_formatting.html">Using special characters and formatting</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/neilstats/ckbplotr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="special_characters_formatting_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using special characters and formatting</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/neilstats/ckbplotr/blob/master/vignettes/special_characters_formatting.Rmd"><code>vignettes/special_characters_formatting.Rmd</code></a></small>
      <div class="hidden name"><code>special_characters_formatting.Rmd</code></div>

    </div>

    
    
<p>It is not always possible to use special characters or apply formatting to headings and other text directly in the plots produced by <code>make_shape_plot</code> and <code>make_forest_plot</code>. However, there are ways to create plots with the text (and formatting) you need. The two main methods are described below followed by some examples.</p>
<div id="copy-and-edit-the-ggplot2-code" class="section level2">
<h2 class="hasAnchor">
<a href="#copy-and-edit-the-ggplot2-code" class="anchor"></a>Copy and edit the ggplot2 code</h2>
<p>Both <code>make_shape_plot</code> and <code>make_forest_plot</code> return a character vector of ggplot2 code that is used to produce the plot. The code is also displayed in the Viewer pane in RStudio. You can copy this code, edit as needed, then use it in your R scripts directly. See the examples below for hints on where and how you need to edit the code.</p>
</div>
<div id="add-layers-to-a-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#add-layers-to-a-plot" class="anchor"></a>Add layers to a plot</h2>
<p>If you want more control over some text on a plot but to still use a <code>make_*</code> function, you can add layers to the plot afterwards. I suggest you run the function first with some placeholder text, note which <code>geom_text</code> (or <code>annotate</code>) code is responsible for the text, rerun without that text (or replace it with ""), then add your own <code>geom_text</code>.</p>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="change-headings-in-make_forest_plot-using-expression" class="section level3">
<h3 class="hasAnchor">
<a href="#change-headings-in-make_forest_plot-using-expression" class="anchor"></a>Change headings in make_forest_plot using expression</h3>
<p>If you want to use different formatting and characters for row headings in <code>make_forest_plot</code> you can you the ‘copy and edit’ method. Just replace the section of code that creates the headings vector. For example you could replace it by a vector of expressions.</p>
<p>First start by using <code>make_forest_plot</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw">forestplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forest_plot.html">make_forest_plot</a></span>(headings         = <span class="kw">varheadings</span>,
                               rows             = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Triglycerides concentration"</span>),
                               cols             = <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">resultsA</span>, <span class="kw">resultsB</span>),
                               exponentiate     = <span class="fl">TRUE</span>,
                               colnames         = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>),
                               col.key          = <span class="st">"variable"</span>,
                               ci.delim         = <span class="st">" - "</span>,
                               xlim             = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>),
                               xticks           = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1</span>, <span class="fl">1.1</span>),
                               blankrows        = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>),
                               scalepoints      = <span class="fl">TRUE</span>,
                               pointsize        = <span class="fl">3</span>,
                               col.left         = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>),
                               col.left.space   = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.02</span>),
                               col.left.heading = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No. of\nevents"</span>),
                               col.right.space  = <span class="fl">0.02</span>,
                               col.heading.space = <span class="fl">1.5</span>,
                               heading.space    = <span class="fl">2</span>,
                               plot.space       = <span class="fl">8</span>,
                               printplot        = <span class="fl">FALSE</span>)
<span class="co">#&gt; Warning: Vectorized input to `element_text()` is not officially supported.</span>
<span class="co">#&gt; Results may be unexpected or may change in future versions of ggplot2.</span>
</pre></div>
<p>Now copy the code from the RStudio Viewer pane, and edit the section under the comment “# Get a character vector of the headings, so these can be used in the plot”. (Also edit the third line so that <code>datatoplot</code> is <code>forestplot$data</code>.)</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co"># ggplot2 code ------------------</span>
<span class="co"># Assign the data returned by the function to datatoplot</span>
<span class="kw">datatoplot</span> <span class="op">&lt;-</span> <span class="kw">forestplot</span><span class="op">$</span><span class="kw">data</span>

<span class="co"># Get a character vector of the headings, so these can be used in the plot</span>
<span class="kw">headings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html">expression</a></span>(<span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">bolditalic</a></span>(<span class="st">"Triglycerides concentration"</span>),
                       <span class="st">""</span>,
                       <span class="st">"VLDL"</span>,
                       <span class="st">"Large"</span>,
                       <span class="st">"Medium"</span>,
                       <span class="st">"Small"</span>,
                       <span class="st">""</span>,
                       <span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">bold</a></span>(<span class="st">"IDL"</span>),
                       <span class="st">""</span>,
                       <span class="st">"LDL"</span>,
                       <span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">italic</a></span>(<span class="st">"Large"</span>),
                       <span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">italic</a></span>(<span class="st">"Medium"</span>),
                       <span class="fu"><a href="https://rdrr.io/r/grDevices/plotmath.html">italic</a></span>(<span class="st">"Small"</span>),
                       <span class="st">""</span>,
                       <span class="st">""</span>)

<span class="co"># Get a character vector of the style for headings</span>
<span class="kw">boldheadings</span> <span class="op">&lt;-</span> <span class="kw">datatoplot</span> <span class="op">%&gt;%</span>
  <span class="kw">dplyr</span>::<span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="kw">row</span>) <span class="op">%&gt;%</span>
  <span class="kw">dplyr</span>::<span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(bold = <span class="kw">dplyr</span>::<span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="kw">estimate_transformed</span>) <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span>(<span class="kw">key</span> <span class="op">%in%</span> <span class="kw">NULL</span>)), <span class="st">"bold"</span>, <span class="st">"plain"</span>)) <span class="op">%&gt;%</span>
  <span class="kw">dplyr</span>::<span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw">row</span>) <span class="op">%&gt;%</span>
  <span class="kw">dplyr</span>::<span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="kw">bold</span>)
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>

<span class="co"># Create the ggplot</span>
<span class="fu">ggplot</span>(<span class="kw">datatoplot</span>, <span class="fu">aes</span>(x=<span class="op">-</span><span class="kw">row</span>, y=<span class="kw">estimate_transformed</span>)) <span class="op">+</span>
  <span class="co"># Put the different columns in side-by-side plots using facets</span>
  <span class="fu">facet_wrap</span>(<span class="op">~</span><span class="kw">column</span>, nrow = <span class="fl">1</span>) <span class="op">+</span>
  
  <span class="co"># Add a line at null effect (only if exponentiate=TRUE)</span>
  <span class="fu">annotate</span>(geom = <span class="st">"segment"</span>, x=<span class="op">-</span><span class="fl">1</span>, xend=<span class="op">-</span><span class="fl">Inf</span>, y=<span class="fl">1</span>, yend=<span class="fl">1</span>, size = <span class="fl">0.5</span>) <span class="op">+</span>
  
  <span class="co"># Plot points at the transformed estimates</span>
  <span class="co">## Scale by inverse of the SE</span>
  <span class="fu">geom_point</span>(<span class="fu">aes</span>(size = <span class="kw">size</span>, shape = <span class="fl">15</span>, colour = <span class="st">"black"</span>, fill = <span class="st">"black"</span>),
             na.rm = <span class="fl">TRUE</span>) <span class="op">+</span>
  
  <span class="co"># Scale the size of points by their side length</span>
  <span class="co"># and make the scale range from zero upwards</span>
  <span class="fu">scale_radius</span>(limits = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">NA</span>),
               range = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">3</span>)) <span class="op">+</span>
  
  <span class="co"># Plot the CIs</span>
  <span class="fu">geom_linerange</span>(data = <span class="op">~</span> <span class="kw">dplyr</span>::<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">.x</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="kw">estimate_transformed</span>)),
                 <span class="fu">aes</span>(ymin = <span class="kw">lci_transformed</span>,
                     ymax = <span class="kw">uci_transformed</span>,
                     colour = <span class="st">"black"</span>), 
                 size = <span class="fl">0.5</span>,
                 na.rm = <span class="fl">TRUE</span>) <span class="op">+</span>
  
  <span class="co"># Add tiny segments with arrows when the CIs go outside axis limits</span>
  
  <span class="co"># Use identity for aesthetic scales</span>
  <span class="fu">scale_shape_identity</span>() <span class="op">+</span>
  <span class="fu">scale_fill_identity</span>() <span class="op">+</span>
  <span class="fu">scale_colour_identity</span>() <span class="op">+</span>
  
  <span class="co"># Flip x and y coordinates</span>
  <span class="fu">coord_flip</span>(clip = <span class="st">"off"</span>,
             ylim = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>)) <span class="op">+</span>
  
  <span class="co"># Add columns to right side of plots</span>
  <span class="co">## column textresult</span>
  <span class="fu">geom_text</span>(<span class="fu">aes</span>(x = <span class="op">-</span><span class="kw">row</span>, y = <span class="fl">1.104423626284</span>,
                label = <span class="kw">textresult</span>),
            hjust = <span class="fl">0</span>,
            size = <span class="fl">3</span>,
            na.rm = <span class="fl">TRUE</span>,
            parse = <span class="fl">TRUE</span>) <span class="op">+</span>
  <span class="fu">annotate</span>(geom = <span class="st">"text"</span>,
           x = <span class="fl">1.5</span>, y = <span class="fl">1.104423626284</span>,
           label = <span class="st">"HR (95% CI)"</span>,
           hjust = <span class="fl">0</span>,
           size = <span class="fl">3</span>,
           fontface = <span class="st">"bold"</span>) <span class="op">+</span>
  
  <span class="co"># Add columns to left side of plots</span>
  <span class="co">## column n</span>
  <span class="fu">geom_text</span>(<span class="fu">aes</span>(x = <span class="op">-</span><span class="kw">row</span>, y = <span class="fl">0.896395166165542</span>,
                label = <span class="kw">`n`</span>,
                fontface = <span class="st">"plain"</span>),
            hjust = <span class="fl">1</span>,
            size = <span class="fl">3</span>,
            na.rm = <span class="fl">TRUE</span>) <span class="op">+</span>
  <span class="fu">annotate</span>(geom = <span class="st">"text"</span>,
           x = <span class="fl">1.5</span>, y = <span class="fl">0.896395166165542</span>,
           label = <span class="st">"No. of
events"</span>,
hjust = <span class="fl">1</span>,
size = <span class="fl">3</span>,
fontface = <span class="st">"bold"</span>) <span class="op">+</span>
  
  <span class="co"># Add xlab below each axis</span>
  <span class="fu">geom_text</span>(<span class="fu">aes</span>(x = <span class="op">-</span><span class="fl">Inf</span>, y = <span class="fl">0.99498743710662</span>, label = <span class="kw">xlab</span>),
            hjust = <span class="fl">0.5</span>,
            size  = <span class="fl">3</span>,
            vjust = <span class="fl">4.4</span>,
            fontface = <span class="st">"bold"</span>,
            data = <span class="kw">dplyr</span>::<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(column = <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>),
                                                 levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>),
                                                 ordered = <span class="fl">TRUE</span>),
                                 xlab = <span class="st">"HR (95% CI)"</span>)) <span class="op">+</span>
  
  <span class="co"># Add column name above each column</span>
  <span class="fu">geom_text</span>(<span class="fu">aes</span>(x = <span class="fl">1.5</span>, y = <span class="fl">0.99498743710662</span>, label = <span class="kw">title</span>),
            hjust = <span class="fl">0.5</span>,
            nudge_x = <span class="fl">2</span>,
            size  = <span class="fl">3</span>,
            fontface = <span class="st">"bold"</span>,
            data = <span class="kw">dplyr</span>::<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(column = <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>),
                                                 levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>),
                                                 ordered = <span class="fl">TRUE</span>),
                                 title = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>))) <span class="op">+</span>
  
  <span class="co"># Set the scale for the y axis (the estimates and CIs)</span>
  <span class="fu">scale_y_continuous</span>(trans  = <span class="st">"log"</span>,
                     breaks = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1</span>, <span class="fl">1.1</span>),
                     expand = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">0</span>)) <span class="op">+</span>
  
  <span class="co"># Set the scale for the x axis (the rows)</span>
  <span class="fu">scale_x_continuous</span>(breaks = <span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="kw">datatoplot</span><span class="op">$</span><span class="kw">row</span>),
                     labels = <span class="kw">headings</span>,
                     name   = <span class="st">""</span>,
                     expand = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">0</span>)) <span class="op">+</span>
  <span class="co"># Add the title</span>
  <span class="fu">labs</span>(title = <span class="st">""</span>) <span class="op">+</span>
  
  <span class="co"># Control the overall looks of the plots</span>
  <span class="fu">theme</span>(text             = <span class="fu">element_text</span>(size = <span class="fl">11</span>),
        line             = <span class="fu">element_line</span>(size = <span class="fl">0.5</span>),
        panel.background = <span class="fu">element_rect</span>(fill = <span class="st">"white"</span>, colour = <span class="fl">NA</span>),
        panel.grid.major = <span class="fu">element_blank</span>(),
        panel.grid.minor = <span class="fu">element_blank</span>(),
        axis.line.x      = <span class="fu">element_line</span>(size = <span class="fl">0.5</span>, lineend = <span class="st">"round"</span>),
        axis.title.x     = <span class="fu">element_blank</span>(),
        axis.ticks.x     = <span class="fu">element_line</span>(colour = <span class="st">"black"</span>),
        axis.text.x      = <span class="fu">element_text</span>(colour = <span class="st">"black"</span>,
                                        margin = <span class="fu">margin</span>(t = <span class="fl">4.4</span>),
                                        vjust  = <span class="fl">1</span>),
        axis.ticks.y     = <span class="fu">element_blank</span>(),
        axis.line.y      = <span class="fu">element_blank</span>(),
        axis.text.y      = <span class="fu">element_text</span>(hjust  = <span class="fl">0</span>,
                                        colour = <span class="st">"black"</span>,
                                        face   = <span class="kw">boldheadings</span>,
                                        margin = <span class="fu">margin</span>(r = <span class="fl">2</span>, unit = <span class="st">"lines"</span>)),
        panel.border     = <span class="fu">element_blank</span>(),
        panel.spacing    = <span class="fu">unit</span>(<span class="fl">8</span>, <span class="st">"lines"</span>),
        strip.background = <span class="fu">element_blank</span>(),
        strip.placement  = <span class="st">"outside"</span>,
        strip.text       = <span class="fu">element_blank</span>(),
        legend.position  = <span class="st">"none"</span>,
        plot.margin      = <span class="fu">unit</span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">6</span>,<span class="fl">2</span>,<span class="fl">0</span>), <span class="st">"lines"</span>))
<span class="co">#&gt; Warning: Vectorized input to `element_text()` is not officially supported.</span>
<span class="co">#&gt; Results may be unexpected or may change in future versions of ggplot2.</span>
</pre></div>
<p><img src="special_characters_formatting_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
</div>
<div id="special-characters" class="section level3">
<h3 class="hasAnchor">
<a href="#special-characters" class="anchor"></a>Special characters</h3>
<p>You can include some special characters just by putting their unicode in your text. But sometimes this does not work correctly, for example on Windows the code for a ‘greater than or equal to’ symbol “\u2265” gets replaced by an equals sign. This can be fixed by using it in your own <code>geom_text</code> code (use either the ‘copy and edit’ or ‘add layers’ method).</p>
<p>Use a unicode symbol in column headings:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw">forestplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forest_plot.html">make_forest_plot</a></span>(headings         = <span class="kw">varheadings</span>,
                               rows             = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Triglycerides concentration"</span>),
                               cols             = <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">resultsA</span>, <span class="kw">resultsB</span>),
                               exponentiate     = <span class="fl">TRUE</span>,
                               colnames         = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                               colheadings      = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">""</span>, <span class="st">""</span>),
                               col.key          = <span class="st">"variable"</span>,
                               ci.delim         = <span class="st">" - "</span>,
                               xlim             = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>),
                               xticks           = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1</span>, <span class="fl">1.1</span>),
                               blankrows        = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>),
                               scalepoints      = <span class="fl">TRUE</span>,
                               pointsize        = <span class="fl">3</span>,
                               col.left         = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>),
                               col.left.space   = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.02</span>),
                               col.left.heading = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No. of\nevents"</span>),
                               col.right.space  = <span class="fl">0.02</span>,
                               col.heading.space = <span class="fl">1.5</span>,
                               heading.space    = <span class="fl">2</span>,
                               plot.space       = <span class="fl">8</span>,
                               printplot        = <span class="fl">FALSE</span>)
<span class="co">#&gt; Warning: Vectorized input to `element_text()` is not officially supported.</span>
<span class="co">#&gt; Results may be unexpected or may change in future versions of ggplot2.</span>

<span class="kw">forestplot</span><span class="op">$</span><span class="kw">plot</span> <span class="op">+</span>
  <span class="fu">geom_text</span>(<span class="fu">aes</span>(x = <span class="fl">1.5</span>, y = <span class="fl">0.99498743710662</span>, label = <span class="kw">title</span>),
            hjust = <span class="fl">0.5</span>,
            nudge_x = <span class="fl">2</span>,
            size  = <span class="fl">3</span>,
            fontface = <span class="st">"bold"</span>,
            data = <span class="kw">dplyr</span>::<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(column = <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                                                 levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                                                 ordered = <span class="fl">TRUE</span>),
                                 title = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A \u2265 10"</span>, <span class="st">" A &lt; 10"</span>)))
</pre></div>
<p><img src="special_characters_formatting_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div id="formatting" class="section level3">
<h3 class="hasAnchor">
<a href="#formatting" class="anchor"></a>Formatting</h3>
<p>Various formatting (called “aesthetics”) such as colour, bold, italics, and angle can be controlled in <code>geom_text</code>. Make use of the arguments of <code>geom_text</code> (<a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_text.html</a>) as you need.</p>
<p>Make column headings bold and italic:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">forestplot</span><span class="op">$</span><span class="kw">plot</span> <span class="op">+</span>
  <span class="fu">geom_text</span>(<span class="fu">aes</span>(x = <span class="fl">1.5</span>, y = <span class="fl">0.99498743710662</span>, label = <span class="kw">title</span>),
            hjust = <span class="fl">0.5</span>,
            nudge_x = <span class="fl">2</span>,
            size  = <span class="fl">3</span>,
            fontface = <span class="st">"bold.italic"</span>,
            data = <span class="kw">dplyr</span>::<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(column = <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                                                 levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                                                 ordered = <span class="fl">TRUE</span>),
                                 title = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A \u2265 10"</span>, <span class="st">" A &lt; 10"</span>)))
</pre></div>
<p><img src="special_characters_formatting_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div id="expressions" class="section level3">
<h3 class="hasAnchor">
<a href="#expressions" class="anchor"></a>Expressions</h3>
<p>The <code>geom_text</code> function has an argument <code>parse</code> which tells ggplot2 to parse text into expressions and display as described in <a href="https://rdrr.io/r/grDevices/plotmath.html">plotmath</a>. (Note that text in columns given by <code>col.right</code> in <code>make_forest_plot</code> already use <code>parse = TRUE</code>.)</p>
<p>Evaluate column headings as expressions:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">forestplot</span><span class="op">$</span><span class="kw">plot</span> <span class="op">+</span>
  <span class="fu">geom_text</span>(<span class="fu">aes</span>(x = <span class="fl">1.5</span>, y = <span class="fl">0.99498743710662</span>, label = <span class="kw">title</span>),
            hjust = <span class="fl">0.5</span>,
            nudge_x = <span class="fl">2</span>,
            size  = <span class="fl">3</span>,
            parse = <span class="fl">TRUE</span>,
            data = <span class="kw">dplyr</span>::<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(column = <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                                                 levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                                                 ordered = <span class="fl">TRUE</span>),
                                 title = <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"bold("</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A&gt;=10"</span>, <span class="st">"A^b"</span>), <span class="st">")"</span>)))
</pre></div>
<p><img src="special_characters_formatting_files/figure-html/unnamed-chunk-5-1.png" width="700"> Note the expressions will remove the <code>fontface</code> and other formatting, but we can use <code>bold</code> inside the text instead (though it does not apply to symbols or numbers).</p>
</div>
<div id="ggtext" class="section level3">
<h3 class="hasAnchor">
<a href="#ggtext" class="anchor"></a>ggtext</h3>
<p>The <a href="https://wilkelab.org/ggtext/">ggtext packge</a> adds support for some Markdown and HTML. You could install this package and use <code>geom_richtext()</code> in place of <code>geom_text()</code> to use some markdown (or HTML).</p>
<p>Bold and italics using markdown:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">forestplot</span><span class="op">$</span><span class="kw">plot</span> <span class="op">+</span>
  <span class="kw">ggtext</span>::<span class="fu"><a href="https://rdrr.io/pkg/ggtext/man/geom_richtext.html">geom_richtext</a></span>(<span class="fu">aes</span>(x = <span class="fl">1.5</span>, y = <span class="fl">0.99498743710662</span>, label = <span class="kw">title</span>),
                        hjust = <span class="fl">0.5</span>,
                        size  = <span class="fl">3</span>,
                        nudge_x = <span class="fl">2</span>,
                        data = <span class="kw">dplyr</span>::<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(column = <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                                                             levels = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                                                             ordered = <span class="fl">TRUE</span>),
                                             title = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"*A*"</span>, <span class="st">"**B&lt;sup&gt;2&lt;/sup&gt;**"</span>)),
                        fill = <span class="fl">NA</span>,
                        label.color = <span class="fl">NA</span>)
</pre></div>
<p><img src="special_characters_formatting_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>You could also use <code>element_markdown</code> inside <code>theme</code> to make use of markdown just in row headings.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="kw">varheadings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(heading1 = <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Triglycerides concentration"</span>, each = <span class="fl">7</span>),
                          heading2 = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"VLDL^a"</span>, <span class="st">"VLDL^a"</span>, <span class="st">"VLDL^a"</span>,
                                       <span class="st">"**IDL**"</span>,
                                       <span class="st">"*LDL*"</span>, <span class="st">"*LDL*"</span>, <span class="st">"*LDL*"</span>),
                          heading3 = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Large"</span>, <span class="st">"Medium"</span>, <span class="st">"Small"</span>,
                                       <span class="fl">NA</span>,
                                       <span class="st">"*Large*"</span>, <span class="st">"*Medium*"</span>, <span class="st">"*Small*"</span>),
                          variable = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'nmr_l_vldl_tg'</span>, <span class="st">'nmr_m_vldl_tg'</span>, <span class="st">'nmr_s_vldl_tg'</span>,
                                       <span class="st">'nmr_idl_tg'</span>,
                                       <span class="st">'nmr_l_ldl_tg'</span>, <span class="st">'nmr_m_ldl_tg'</span>, <span class="st">'nmr_s_ldl_tg'</span>),
                          stringsAsFactors = <span class="fl">FALSE</span>)

<span class="kw">forestplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forest_plot.html">make_forest_plot</a></span>(headings         = <span class="kw">varheadings</span>,
                               rows             = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Triglycerides concentration"</span>),
                               cols             = <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">resultsA</span>, <span class="kw">resultsB</span>),
                               exponentiate     = <span class="fl">TRUE</span>,
                               colnames         = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
                               colheadings      = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>),
                               col.key          = <span class="st">"variable"</span>,
                               ci.delim         = <span class="st">" - "</span>,
                               xlim             = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>),
                               xticks           = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1</span>, <span class="fl">1.1</span>),
                               blankrows        = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>),
                               scalepoints      = <span class="fl">TRUE</span>,
                               pointsize        = <span class="fl">3</span>,
                               col.left         = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>),
                               col.left.space   = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.02</span>),
                               col.left.heading = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No. of\nevents"</span>),
                               col.right.space  = <span class="fl">0.02</span>,
                               col.heading.space = <span class="fl">1.5</span>,
                               heading.space    = <span class="fl">2</span>,
                               plot.space       = <span class="fl">8</span>,
                               printplot        = <span class="fl">FALSE</span>,
                               showcode         = <span class="fl">FALSE</span>)

<span class="kw">forestplot</span><span class="op">$</span><span class="kw">plot</span> <span class="op">+</span> 
  <span class="fu">theme</span>(axis.text.y = <span class="kw">ggtext</span>::<span class="fu"><a href="https://rdrr.io/pkg/ggtext/man/element_markdown.html">element_markdown</a></span>())
</pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Neil Wright.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
