<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started with ckbplotr • ckbplotr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started with ckbplotr">
<meta property="og:description" content="ckbplotr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ckbplotr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ckbplotr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/plot_like_ckb.html">Make any ggplot like a CKB plot</a>
    </li>
    <li>
      <a href="../articles/make_forest_plot.html">More with forest plots</a>
    </li>
    <li>
      <a href="../articles/make_shape_plot.html">More with shape plots</a>
    </li>
    <li>
      <a href="../articles/adding_editing_code.html">Changing generated code</a>
    </li>
    <li>
      <a href="../articles/special_characters_formatting.html">Using special characters and formatting</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../articles/index.html">More articles...</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Releases</li>
    <li>
      <a href="https://github.com/neilstats/ckbplotr/releases/latest" class="external-link">Latest</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/neilstats/ckbplotr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ckbplotr_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started with ckbplotr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/neilstats/ckbplotr/blob/HEAD/vignettes/ckbplotr.Rmd" class="external-link"><code>vignettes/ckbplotr.Rmd</code></a></small>
      <div class="hidden name"><code>ckbplotr.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="shape-plots">Shape plots<a class="anchor" aria-label="anchor" href="#shape-plots"></a>
</h2>
<p><code><a href="../reference/make_shape_plot.html">make_shape_plot()</a></code> creates a plot of estimates and CIs against risk factor levels using the <code>ggplot2</code> package. The function returns both a plot and the ggplot2 code used to create the plot. In RStudio the ggplot2 code used to create the plot will be shown in the Viewer pane (with syntax highlighting if the <a href="https://cran.r-project.org/package=highlight" class="external-link">highlights</a> package is installed).</p>
<p>The function uses <code><a href="../reference/plot_like_ckb.html">plot_like_ckb()</a></code> to modify the theme and control the look of the plot.</p>
<div class="section level3">
<h3 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ckbplotr_shape_data</span>
<span class="co">#&gt;    est   se   rf   n is_female</span>
<span class="co">#&gt; 1 1.00 0.08 20.0 109         0</span>
<span class="co">#&gt; 2 1.25 0.03 28.0 103         0</span>
<span class="co">#&gt; 3 1.50 0.07 38.0 143         0</span>
<span class="co">#&gt; 4 1.75 0.15 50.0 104         0</span>
<span class="co">#&gt; 5 1.70 0.08 18.5 140         1</span>
<span class="co">#&gt; 6 1.85 0.08 25.0 134         1</span>
<span class="co">#&gt; 7 2.25 0.07 37.0 127         1</span>
<span class="co">#&gt; 8 2.60 0.10 47.0  99         1</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="simple-example">Simple example<a class="anchor" aria-label="anchor" href="#simple-example"></a>
</h3>
<p>Given a data frame of estimates and standard errors (to be plotted on the y axis), and risk factor levels (to be plotted on the x axis), a plot can be created.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_shape_plot.html">make_shape_plot</a></span><span class="op">(</span><span class="va">ckbplotr_shape_data</span><span class="op">[</span><span class="va">ckbplotr_shape_data</span><span class="op">$</span><span class="va">is_female</span> <span class="op">==</span> <span class="fl">0</span>,<span class="op">]</span>,
                        col.x        <span class="op">=</span> <span class="st">"rf"</span>,
                        col.estimate <span class="op">=</span> <span class="st">"est"</span>,
                        col.stderr   <span class="op">=</span> <span class="st">"se"</span>,
                        col.n        <span class="op">=</span> <span class="st">"n"</span>,
                        xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">50</span><span class="op">)</span>,
                        ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,
                        scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,
                        title        <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>
<span class="co">#&gt; Warning in sprintf("%s$", extension, ignore.case = TRUE): one argument not used</span>
<span class="co">#&gt; by format '%s$'</span></code></pre></div>
<p><img src="ckbplotr_files/figure-html/simple-example-1.png" width="50%" style="display: block; margin: auto;"></p>
<p>For more details on customising these forest plots, see <a href="make_shape_plot.html">“More with shape plots”</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="forest-plots">Forest plots<a class="anchor" aria-label="anchor" href="#forest-plots"></a>
</h2>
<p><code><a href="../reference/make_forest_plot.html">make_forest_plot()</a></code> creates a forest plot using the <a href="https://ggplot2.tidyverse.org/" class="external-link">ggplot2</a> graphics package. The function returns both a plot and the ggplot2 code used to create the plot. In RStudio the code used to create the plot will be shown in the Viewer pane (with syntax highlighting if the <a href="https://cran.r-project.org/package=highlight" class="external-link">highlights</a> package is installed).</p>
<div class="section level3">
<h3 id="prepare-data">Prepare data<a class="anchor" aria-label="anchor" href="#prepare-data"></a>
</h3>
<p>First of all, do your analyses and put the results into data frames (one data frame for each forest plot panel). Here we take subsets of the example data provided in the package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resultsA</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ckbplotr_forest_data</span>, <span class="va">name</span> <span class="op">==</span> <span class="st">"A"</span><span class="op">)</span>
<span class="va">resultsB</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ckbplotr_forest_data</span>, <span class="va">name</span> <span class="op">==</span> <span class="st">"B"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">resultsA</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"variable"</span>, <span class="st">"estimate"</span>, <span class="st">"stderr"</span>, <span class="st">"n"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;       variable     estimate     stderr    n</span>
<span class="co">#&gt; 1 nmr_l_vldl_p  0.007652073 0.03020935  407</span>
<span class="co">#&gt; 2 nmr_m_vldl_p  0.006110668 0.02475996 1816</span>
<span class="co">#&gt; 3 nmr_s_vldl_p -0.028511316 0.04000646  812</span>
<span class="co">#&gt; 4    nmr_idl_p  0.004209247 0.01336079  938</span>
<span class="co">#&gt; 5  nmr_l_ldl_p  0.001505025 0.01589807  800</span>
<span class="co">#&gt; 6  nmr_m_ldl_p  0.011208151 0.02168255  423</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="simple-forest-plot">Simple forest plot<a class="anchor" aria-label="anchor" href="#simple-forest-plot"></a>
</h3>
<p>The <code>panels</code> argument is a list of data frames with results to be plotted, the <code>col.key</code> argument is the name of the column that defines which results should be plotted on the same row, and the <code>exponentiate</code> argument is a logical value telling the function we are providing estimates on the log scale.</p>
<p>By default, the function assumes that estimates and standard errors are in columns named “estimate” and “stderr”, but this can also be set by the <code>col.estimate</code> and <code>col.stderr</code> arguments.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">forestplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forest_plot.html">make_forest_plot</a></span><span class="op">(</span>panels       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">resultsA</span>, <span class="va">resultsB</span><span class="op">)</span>,
                               col.key      <span class="op">=</span> <span class="st">"variable"</span>,
                               exponentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Warning in sprintf("%s$", extension, ignore.case = TRUE): one argument not used</span>
<span class="co">#&gt; by format '%s$'</span></code></pre></div>
<p><img src="ckbplotr_files/figure-html/simple-forest-plot-1.png" width="90%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="using-row-labels">Using row labels<a class="anchor" aria-label="anchor" href="#using-row-labels"></a>
</h3>
<p>To use row labels, first create a data frame of labels. The data set must contain:</p>
<ul>
<li>a column used to match labels to the correct results, specified in the argument <code>col.key</code>.</li>
<li>up to three columns with headings/subheadings/labels for rows.</li>
</ul>
<p>If a particular level of label is not required it can be set to missing.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ckbplotr_row_labels</span><span class="op">)</span>
<span class="co">#&gt;                              heading subheading  label     variable</span>
<span class="co">#&gt; 1 Lipoprotein particle concentration       VLDL  Large nmr_l_vldl_p</span>
<span class="co">#&gt; 2 Lipoprotein particle concentration       VLDL Medium nmr_m_vldl_p</span>
<span class="co">#&gt; 3 Lipoprotein particle concentration       VLDL  Small nmr_s_vldl_p</span>
<span class="co">#&gt; 4 Lipoprotein particle concentration        IDL   &lt;NA&gt;    nmr_idl_p</span>
<span class="co">#&gt; 5 Lipoprotein particle concentration        LDL  Large  nmr_l_ldl_p</span>
<span class="co">#&gt; 6 Lipoprotein particle concentration        LDL Medium  nmr_m_ldl_p</span></code></pre></div>
<p>In <code><a href="../reference/make_forest_plot.html">make_forest_plot()</a></code> specify the <code>row.labels</code> argument as the data frame of labels you’ve created. Use the <code>row.labels.levels</code> argument to choose which columns are used as headings/subheadings/labels.</p>
<p>Use the <code>rows</code> argument to choose the results to be plotted. The first level (heading) labels will be included in the plot from top to bottom. Other labels will be in the order that they are in the <code>row.labels</code> data frame.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">forestplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forest_plot.html">make_forest_plot</a></span><span class="op">(</span>panels            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">resultsA</span>, <span class="va">resultsB</span><span class="op">)</span>,
                               col.key           <span class="op">=</span> <span class="st">"variable"</span>,
                               row.labels        <span class="op">=</span> <span class="va">ckbplotr_row_labels</span>,
                               row.labels.levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"heading"</span>, <span class="st">"subheading"</span>, <span class="st">"label"</span><span class="op">)</span>,
                               rows              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Triglycerides concentration"</span>,
                                                     <span class="st">"Lipoprotein particle concentration"</span><span class="op">)</span>,
                               exponentiate      <span class="op">=</span> <span class="cn">TRUE</span>,
                               panel.headings    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span><span class="op">)</span>,
                               xlim              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">1.1</span><span class="op">)</span>,
                               xticks            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">1</span>, <span class="fl">1.1</span><span class="op">)</span>,
                               scalepoints       <span class="op">=</span> <span class="cn">TRUE</span>,
                               pointsize         <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; Warning in sprintf("%s$", extension, ignore.case = TRUE): one argument not used</span>
<span class="co">#&gt; by format '%s$'</span></code></pre></div>
<p><img src="ckbplotr_files/figure-html/using-row-labels-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>In this plot we’ve also use the <code>panel.headings</code>, <code>xlim</code>, <code>xticks</code>, <code>scalepoints</code>, and <code>pointsize</code> arguments to customise the plot.</p>
<p>For more details on customising these forest plots, see <a href="make_forest_plot.html">“More with forest plots”</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="other-plots">Other plots<a class="anchor" aria-label="anchor" href="#other-plots"></a>
</h2>
<p>Supply an existing <a href="https://ggplot2.tidyverse.org/" class="external-link">ggplot2</a> plot as the <code>plot</code> argument to <code><a href="../reference/plot_like_ckb.html">plot_like_ckb()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span>,
               <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="va">ckbplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_like_ckb.html">plot_like_ckb</a></span><span class="op">(</span>plot <span class="op">=</span> <span class="va">plot</span>,
                         xlims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">8</span><span class="op">)</span>,
                         ylims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>

<span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">plot</span>, <span class="va">ckbplot</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="ckbplotr_files/figure-html/a-plot-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>See <a href="plot_like_ckb.html">“Make any ggplot like a CKB plot”</a> for more details.</p>
</div>
<div class="section level2">
<h2 id="confidence-intervals">Confidence intervals<a class="anchor" aria-label="anchor" href="#confidence-intervals"></a>
</h2>
<p>When standard errors are supplied to the <code>make_</code> functions, confidence intervals are calculated as 95% confidence intervals using the Normal approximation method (with critical value 1.96).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Neil Wright.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
