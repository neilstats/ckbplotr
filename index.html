<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create CKB Plots • ckbplotr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Create CKB Plots">
<meta property="og:description" content="ckbplotr provides functions to help create and style plots in R.
    It is being developed by, and primarily for, China Kadoorie Biobank 
    researchers.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ckbplotr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/make_forest_plot.html">Making forest plots</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/neilstats/ckbplotr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="ckbplotr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ckbplotr" class="anchor"></a>ckbplotr</h1></div>
<p><code>ckbplotr</code> provides functions to help create and style plots in R. It is being developed by, and primarily for, <a href="http://www.ckbiobank.org">China Kadoorie Biobank</a> researchers.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div id="directly-from-github" class="section level3">
<h3 class="hasAnchor">
<a href="#directly-from-github" class="anchor"></a>Directly from github</h3>
<p>The latest development version of <code>ckbplotr</code> can be installed directly from github using devtools.</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">'devtools'</span>)
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu">install_github</span>(<span class="st">'neilstats/ckbplotr'</span>)</pre></div>
</div>
<div id="or-from-source-package" class="section level3">
<h3 class="hasAnchor">
<a href="#or-from-source-package" class="anchor"></a>Or from source package</h3>
<p><code>ckbplotr</code> can also be installed from its source package. The R packages <code>ggplot2</code>, <code>magrittr</code>, <code>readr</code>, <code>tibble</code>, <code>dplyr</code>, <code>purrr</code> and <code>rlang</code> must first be installed. These are part of the collection of tidyverse packages.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co"># The easiest way is to install the whole tidyverse:</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"tidyverse"</span>)

<span class="co"># # Or install just these packages:</span>
<span class="co"># install.packages(c("ggplot2", "readr", "dplyr", "purrr"))</span></pre></div>
<p>Then <code>ckbplotr</code> can be installed from its source package using the code:</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"ckbplotr.tar.gz"</span>, <span class="kw">repos</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="kw">type</span> <span class="kw">=</span> <span class="st">"source"</span>)</pre></div>
<p>Or, in RStudio, open the “Tools” menu and select “Install Packages…”. In the “Install from…” box select “Package Archive File”, and in the “Package archive” box browse to the ckbplotr.tar.gz file.</p>
<p>The source package for the latest release version is available <a href="https://github.com/neilstats/ckbplotr/releases/latest">here</a>.</p>
</div>
</div>
<div id="the-make_shape_plot-function" class="section level2">
<h2 class="hasAnchor">
<a href="#the-make_shape_plot-function" class="anchor"></a>The make_shape_plot function</h2>
<p>The <code>make_shape_plot</code> function creates a plot of estimates and CIs against risk factor levels using the <code>ggplot2</code> package.</p>
<p>The function returns a named list containing:</p>
<ul>
<li>plot: the plot</li>
<li>code: ggplot2 code to generate the plot</li>
</ul>
<p>The function uses the <code>plot_like_ckb</code> function to modify the theme and control the look of the plot.</p>
<p>In RStudio, the ggplot2 code used to generate the plot will be shown in the ‘Viewer’ pane. This code can be copied and further edited to adapt the plot.</p>
<div id="examples" class="section level3">
<h3 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h3>
<p>Given a data frame of estimates and standard errors (to be plotted on the y axis), and risk factor levels (to be plotted on the x axis), a plot can be created.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ckbplotr</span>)

<span class="no">results</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">est</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1.25</span>, <span class="fl">1.5</span>, <span class="fl">1.75</span>, <span class="fl">1.1</span>, <span class="fl">1.35</span>, <span class="fl">1.75</span>, <span class="fl">2</span>),
  <span class="kw">se</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.08</span>, <span class="fl">0.02</span>, <span class="fl">0.07</span>, <span class="fl">0.15</span>, <span class="fl">0.05</span>, <span class="fl">0.02</span>, <span class="fl">0.07</span>, <span class="fl">0.1</span>),
  <span class="kw">rf</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">20</span>, <span class="fl">28</span>, <span class="fl">35</span>, <span class="fl">50</span>, <span class="fl">18.5</span>, <span class="fl">25</span>, <span class="fl">32</span>, <span class="fl">47</span>),
  <span class="kw">n</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">109</span>, <span class="fl">103</span>, <span class="fl">143</span>, <span class="fl">104</span>, <span class="fl">140</span>, <span class="fl">134</span>, <span class="fl">127</span>, <span class="fl">99</span>),
  <span class="kw">is_female</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>)
)

<span class="no">plot</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/make_shape_plot.html">make_shape_plot</a></span>(<span class="no">results</span>[<span class="no">results</span>$<span class="no">is_female</span> <span class="kw">==</span> <span class="fl">1</span>,],
                        <span class="kw">col.x</span>        <span class="kw">=</span> <span class="st">"rf"</span>,
                        <span class="kw">col.estimate</span> <span class="kw">=</span> <span class="st">"est"</span>,
                        <span class="kw">col.stderr</span>   <span class="kw">=</span> <span class="st">"se"</span>,
                        <span class="kw">col.n</span>        <span class="kw">=</span> <span class="st">"n"</span>,
                        <span class="kw">xlims</span>        <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">15</span>,<span class="fl">50</span>),
                        <span class="kw">ylims</span>        <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.5</span>, <span class="fl">3</span>),
                        <span class="kw">scalepoints</span>  <span class="kw">=</span> <span class="fl">TRUE</span>,
                        <span class="kw">title</span>        <span class="kw">=</span> <span class="kw">NULL</span>)</pre></div>
<p><img src="reference/figures/README-make_shape_plot-example-1-1.png" width="100%"></p>
<p>The <code>col.group</code> argument can be supplied to plot results for different groups (in shades of grey).</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">plot</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/make_shape_plot.html">make_shape_plot</a></span>(<span class="no">results</span>,
                        <span class="kw">col.x</span>        <span class="kw">=</span> <span class="st">"rf"</span>,
                        <span class="kw">col.estimate</span> <span class="kw">=</span> <span class="st">"est"</span>,
                        <span class="kw">col.stderr</span>   <span class="kw">=</span> <span class="st">"se"</span>,
                        <span class="kw">col.n</span>        <span class="kw">=</span> <span class="st">"n"</span>,
                        <span class="kw">col.group</span>    <span class="kw">=</span> <span class="st">"is_female"</span>,
                        <span class="kw">xlims</span>        <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">15</span>,<span class="fl">50</span>),
                        <span class="kw">ylims</span>        <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.5</span>, <span class="fl">3</span>),
                        <span class="kw">scalepoints</span>  <span class="kw">=</span> <span class="fl">TRUE</span>,
                        <span class="kw">title</span>        <span class="kw">=</span> <span class="kw">NULL</span>)</pre></div>
<p><img src="reference/figures/README-make_shape_plot-example-2-1.png" width="100%"></p>
</div>
</div>
<div id="the-plot_like_ckb-function" class="section level2">
<h2 class="hasAnchor">
<a href="#the-plot_like_ckb-function" class="anchor"></a>The plot_like_ckb function</h2>
<p>The <code>plot_like_ckb</code> function does three things to a ggplot2 plot:</p>
<ol>
<li>modifies the theme (i.e. the overall appearance)</li>
<li>extends the plotting area, hides the default axis lines and manually adds axis lines (so that you can have a custom sized gap between the plotting area and the axes)</li>
<li>applies a fixed aspect ratio</li>
</ol>
<div id="examples-1" class="section level3">
<h3 class="hasAnchor">
<a href="#examples-1" class="anchor"></a>Examples</h3>
<p>Make a scatter plot with <code>ggplot</code>.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ckbplotr</span>)

<span class="no">plot</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">displ</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">hwy</span>)) + <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">1</span>)
<span class="no">plot</span></pre></div>
<p><img src="reference/figures/README-a-plot-1.png" width="100%"></p>
<p>Then apply the <code>plot_like_ckb</code> function to the plot.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="fu"><a href="reference/plot_like_ckb.html">plot_like_ckb</a></span>(<span class="kw">plot</span> <span class="kw">=</span> <span class="no">plot</span>, <span class="kw">xlims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">8</span>), <span class="kw">ylims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">10</span>, <span class="fl">50</span>))</pre></div>
<p><img src="reference/figures/README-plot_like_ckb-example-1-1.png" width="100%"></p>
<p>If you do not want a gap between the axes, set <code>gap = c(0, 0)</code>.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="fu"><a href="reference/plot_like_ckb.html">plot_like_ckb</a></span>(<span class="kw">plot</span> <span class="kw">=</span> <span class="no">plot</span>, <span class="kw">xlims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">8</span>), <span class="kw">ylims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">10</span>, <span class="fl">50</span>), <span class="kw">gap</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0</span>))</pre></div>
<p><img src="reference/figures/README-plot_like_ckb-example-2-1.png" width="100%"></p>
<p>If you wish to override some aspect of the theme applied by <code>plot_like_ckb</code>, then this can be done by adding a theme after the function.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="fu"><a href="reference/plot_like_ckb.html">plot_like_ckb</a></span>(<span class="kw">plot</span> <span class="kw">=</span> <span class="no">plot</span>, <span class="kw">xlims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">8</span>), <span class="kw">ylims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">10</span>, <span class="fl">50</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="kw">axis.title</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span>(<span class="kw">colour</span> <span class="kw">=</span> <span class="st">"red"</span>, <span class="kw">face</span> <span class="kw">=</span> <span class="st">"plain"</span>))</pre></div>
<p><img src="reference/figures/README-plot_like_ckb-example-3-1.png" width="100%"></p>
<p>If any data points you are plotting fall outside the axes, then they will still be drawn and may show up in places such as the axes, the legend, the plot title, or the plot margins. There is also no warning if data points fall outside the whole plot area.</p>
<p>So it is best to check that your <code>xlim</code> and <code>ylim</code> values are suitable for your data before using the function.</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="co"># The xlim and ylim ranges are too narrow</span>
<span class="fu"><a href="reference/plot_like_ckb.html">plot_like_ckb</a></span>(<span class="kw">plot</span> <span class="kw">=</span> <span class="no">plot</span>, <span class="kw">xlims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">4</span>), <span class="kw">ylims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">20</span>, <span class="fl">50</span>))</pre></div>
<p><img src="reference/figures/README-plot_like_ckb-example-4-1.png" width="100%"></p>
<p>A bar chart.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">barplot</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="no">class</span>)) + <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span>()
<span class="fu"><a href="reference/plot_like_ckb.html">plot_like_ckb</a></span>(<span class="no">barplot</span>, <span class="kw">xlims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.5</span>, <span class="fl">7.5</span>), <span class="kw">ylims</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">70</span>), <span class="kw">gap</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.025</span>, <span class="fl">0.005</span>), <span class="kw">ratio</span> <span class="kw">=</span> <span class="fl">0.5</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="kw">axis.ticks.x</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>())</pre></div>
<p><img src="reference/figures/README-bar-chart-example-1.png" width="100%"></p>
</div>
</div>
<div id="the-make_forest_plot-function" class="section level2">
<h2 class="hasAnchor">
<a href="#the-make_forest_plot-function" class="anchor"></a>The make_forest_plot function</h2>
<p>The <code>make_forest_plot</code> function creates a forest plot using the <code>ggplot2</code> graphics package. It is available as part of the <code>ckbplotr</code> package.</p>
<p>The function returns a named list containg:</p>
<ul>
<li>plot: the plot</li>
<li>data: a data frame from which the plot is generated</li>
<li>code: ggplot2 code to generate the plot</li>
</ul>
<p>In RStudio the ggplot2 code used to generate the plot will be shown in the ‘Viewer’ pane. If modifications are needed to the plot, then this code can be copied, edited, and run as needed.</p>
<div id="expected-warning" class="section level3">
<h3 class="hasAnchor">
<a href="#expected-warning" class="anchor"></a>Expected warning</h3>
<p>You may get the following warning when using this function.</p>
<blockquote>
<p>Vectorized input to <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text()</a></code> is not officially supported. Results may be unexpected or may change in future versions of ggplot2.</p>
</blockquote>
<p>This is related to how some headings used to label the rows of the forest plot are made bold. This should not be a problem if the forest plot produced appears as expected. (This hack is discussed <a href="https://github.com/tidyverse/ggplot2/issues/3492">here</a>.)</p>
</div>
<div id="the-headings-data-frame" class="section level3">
<h3 class="hasAnchor">
<a href="#the-headings-data-frame" class="anchor"></a>The headings data frame</h3>
<p>The data frame specified in the <code>headings</code> argument allows the use of headings to label the rows of the forest plot.</p>
<p>This must data frame contain columns ‘heading1’, ‘heading2’ and ‘heading3’, which can be set to NA if not needed for a particular row. For example, if you do not need a third level of heading for a particular row, then set <code>heading3=NA</code> for that row. If you only need one level of headings, then set <code>heading2=NA</code> and <code>heading3=NA</code> for every row.</p>
<p>The data set must also contain a column with the same name as a column in each of the results data sets. This column is used to match headings to the correct results, and is specified in the argument <code>col.key</code>.</p>
<p>The argument <code>rows</code> specifies which results should be included in the plot, by giving some headings from the heading1 column of the headings data frame.</p>
<p>(The order given in the <code>rows</code> argument decides the order in which the heading1 labels will be in the plot (top to bottom). The heading2 and heading3 labels will be in the order that they are in the headings data frame.)</p>
</div>
<div id="examples-2" class="section level3">
<h3 class="hasAnchor">
<a href="#examples-2" class="anchor"></a>Examples</h3>
<p>First of all, do your analyses and put the results into data frames (one data frame for each forest plot column). Here we generate some example results.</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">57911624</span>)
<span class="no">exampleresults</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(){
  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">variable</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'nmr_l_vldl_p'</span>, <span class="st">'nmr_m_vldl_p'</span>, <span class="st">'nmr_s_vldl_p'</span>,
                          <span class="st">'nmr_idl_p'</span>,
                          <span class="st">'nmr_l_ldl_p'</span>, <span class="st">'nmr_m_ldl_p'</span>, <span class="st">'nmr_s_ldl_p'</span>,
                          <span class="st">'nmr_l_vldl_tg'</span>, <span class="st">'nmr_m_vldl_tg'</span>, <span class="st">'nmr_s_vldl_tg'</span>,
                          <span class="st">'nmr_idl_tg'</span>,
                          <span class="st">'nmr_l_ldl_tg'</span>, <span class="st">'nmr_m_ldl_tg'</span>, <span class="st">'nmr_s_ldl_tg'</span>,
                          <span class="st">'nmr_l_vldl_c'</span>, <span class="st">'nmr_m_vldl_c'</span>, <span class="st">'nmr_s_vldl_c'</span>,
                          <span class="st">'nmr_idl_c'</span>,
                          <span class="st">'nmr_l_ldl_c'</span>, <span class="st">'nmr_m_ldl_c'</span>, <span class="st">'nmr_s_ldl_c'</span>),
             <span class="kw">estimate</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">21</span>, <span class="fl">0</span>, <span class="fl">0.02</span>),
             <span class="kw">stderr</span>   <span class="kw">=</span> <span class="fl">0.012</span> + <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">21</span>, <span class="fl">0</span>, <span class="fl">0.015</span>)),
             <span class="kw">n</span>        <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="fl">21</span>, <span class="fl">100</span>, <span class="fl">2000</span>)),
             <span class="kw">nb</span>       <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="fl">21</span>, <span class="fl">100</span>, <span class="fl">2000</span>)))
}
<span class="no">resultsA</span> <span class="kw">&lt;-</span> <span class="fu">exampleresults</span>()
<span class="no">resultsB</span> <span class="kw">&lt;-</span> <span class="fu">exampleresults</span>()
<span class="no">resultsC</span> <span class="kw">&lt;-</span> <span class="fu">exampleresults</span>()
<span class="no">resultsD</span> <span class="kw">&lt;-</span> <span class="fu">exampleresults</span>()
<span class="no">resultsE</span> <span class="kw">&lt;-</span> <span class="fu">exampleresults</span>()</pre></div>
<div class="sourceCode" id="cb13"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ckbplotr</span>)

<span class="no">forestplot</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/make_forest_plot.html">make_forest_plot</a></span>(<span class="kw">cols</span>         <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">resultsA</span>, <span class="no">resultsB</span>),
                               <span class="kw">exponentiate</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
                               <span class="kw">colnames</span>     <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>),
                               <span class="kw">col.key</span>      <span class="kw">=</span> <span class="st">"variable"</span>)
<span class="co">#&gt; Warning: Vectorized input to `element_text()` is not officially supported.</span>
<span class="co">#&gt; Results may be unexpected or may change in future versions of ggplot2.</span></pre></div>
<p><img src="reference/figures/README-make_forest_plot-example-1-1.png" width="100%"></p>
<p>To use headings, create a data frame of headings and specify arguments <code>headings</code> and <code>rows</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co">#&gt;                              heading1 heading2 heading3      variable</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co">#&gt; 1  Lipoprotein particle concentration     VLDL    Large  nmr_l_vldl_p</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co">#&gt; 2  Lipoprotein particle concentration     VLDL   Medium  nmr_m_vldl_p</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co">#&gt; 3  Lipoprotein particle concentration     VLDL    Small  nmr_s_vldl_p</span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co">#&gt; 4  Lipoprotein particle concentration      IDL     &lt;NA&gt;     nmr_idl_p</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co">#&gt; 5  Lipoprotein particle concentration      LDL    Large   nmr_l_ldl_p</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="co">#&gt; 6  Lipoprotein particle concentration      LDL   Medium   nmr_m_ldl_p</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co">#&gt; 7  Lipoprotein particle concentration      LDL    Small   nmr_s_ldl_p</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co">#&gt; 8         Triglycerides concentration     VLDL    Large nmr_l_vldl_tg</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">#&gt; 9         Triglycerides concentration     VLDL   Medium nmr_m_vldl_tg</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co">#&gt; 10        Triglycerides concentration     VLDL    Small nmr_s_vldl_tg</span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="co">#&gt; 11        Triglycerides concentration      IDL     &lt;NA&gt;    nmr_idl_tg</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="co">#&gt; 12        Triglycerides concentration      LDL    Large  nmr_l_ldl_tg</span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="co">#&gt; 13        Triglycerides concentration      LDL   Medium  nmr_m_ldl_tg</span></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="co">#&gt; 14        Triglycerides concentration      LDL    Small  nmr_s_ldl_tg</span></span>
<span id="cb14-16"><a href="#cb14-16"></a><span class="co">#&gt; 15          Cholesterol concentration     VLDL    Large  nmr_l_vldl_c</span></span>
<span id="cb14-17"><a href="#cb14-17"></a><span class="co">#&gt; 16          Cholesterol concentration     VLDL   Medium  nmr_m_vldl_c</span></span>
<span id="cb14-18"><a href="#cb14-18"></a><span class="co">#&gt; 17          Cholesterol concentration     VLDL    Small  nmr_s_vldl_c</span></span>
<span id="cb14-19"><a href="#cb14-19"></a><span class="co">#&gt; 18          Cholesterol concentration      IDL     &lt;NA&gt;     nmr_idl_c</span></span>
<span id="cb14-20"><a href="#cb14-20"></a><span class="co">#&gt; 19          Cholesterol concentration      LDL    Large   nmr_l_ldl_c</span></span>
<span id="cb14-21"><a href="#cb14-21"></a><span class="co">#&gt; 20          Cholesterol concentration      LDL   Medium   nmr_m_ldl_c</span></span>
<span id="cb14-22"><a href="#cb14-22"></a><span class="co">#&gt; 21          Cholesterol concentration      LDL    Small   nmr_s_ldl_c</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="r"><span class="no">forestplot</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/make_forest_plot.html">make_forest_plot</a></span>(<span class="kw">headings</span>         <span class="kw">=</span> <span class="no">headings</span>,
                               <span class="kw">rows</span>             <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Lipoprotein particle concentration"</span>,
                                                    <span class="st">"Triglycerides concentration"</span>),
                               <span class="kw">cols</span>             <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">resultsA</span>, <span class="no">resultsB</span>),
                               <span class="kw">exponentiate</span>     <span class="kw">=</span> <span class="fl">TRUE</span>,
                               <span class="kw">colnames</span>         <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Analysis A"</span>, <span class="st">"Analysis B"</span>),
                               <span class="kw">col.key</span>          <span class="kw">=</span> <span class="st">"variable"</span>,
                               <span class="kw">ci.delim</span>         <span class="kw">=</span> <span class="st">" - "</span>,
                               <span class="kw">xlim</span>             <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1.1</span>),
                               <span class="kw">xticks</span>           <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">1</span>, <span class="fl">1.1</span>),
                               <span class="kw">blankrows</span>        <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>),
                               <span class="kw">scalepoints</span>      <span class="kw">=</span> <span class="fl">TRUE</span>,
                               <span class="kw">pointsize</span>        <span class="kw">=</span> <span class="fl">3</span>,
                               <span class="kw">col.left</span>         <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>),
                               <span class="kw">col.left.space</span>   <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.02</span>),
                               <span class="kw">col.left.heading</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No. of\nevents"</span>),
                               <span class="kw">col.right.space</span>  <span class="kw">=</span> <span class="fl">0.02</span>,
                               <span class="kw">col.heading.space</span> <span class="kw">=</span> <span class="fl">1.5</span>,
                               <span class="kw">heading.space</span>    <span class="kw">=</span> <span class="fl">2</span>,
                               <span class="kw">plot.space</span>       <span class="kw">=</span> <span class="fl">8</span>)
<span class="co">#&gt; Warning: Vectorized input to `element_text()` is not officially supported.</span>
<span class="co">#&gt; Results may be unexpected or may change in future versions of ggplot2.</span></pre></div>
<p><img src="reference/figures/README-make_forest_plot-example-2-1.png" width="100%"></p>
</div>
</div>
<div id="make_jasper_forest_plot-function" class="section level2">
<h2 class="hasAnchor">
<a href="#make_jasper_forest_plot-function" class="anchor"></a>make_jasper_forest_plot function</h2>
<p>The <code>make_jasper_forest_plot</code> function requires the in-house Jasper package, which is not publicly available.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/neilstats/ckbplotr/">https://​github.com/​neilstats/​ckbplotr/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/neilstats/ckbplotr/issues">https://​github.com/​neilstats/​ckbplotr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Neil Wright <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Neil Wright.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
