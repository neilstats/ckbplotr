<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ckbplotr">
<title>More with shape plots • ckbplotr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="More with shape plots">
<meta property="og:description" content="ckbplotr">
<meta property="og:image" content="https://neilstats.github.io/ckbplotr/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ckbplotr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.6.6.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/ckbplotr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/plot_like_ckb.html">Make any ggplot like a CKB plot</a>
    <a class="dropdown-item" href="../articles/forest_plot.html">More with forest plots</a>
    <a class="dropdown-item" href="../articles/forest_confidence_intervals.html">Confidence interval lines in forest plots</a>
    <a class="dropdown-item" href="../articles/shape_plot.html">More with shape plots</a>
    <a class="dropdown-item" href="../articles/adding_editing_code.html">Changing generated code</a>
    <a class="dropdown-item" href="../articles/special_characters_formatting.html">Using special characters and formatting</a>
    <a class="dropdown-item" href="../articles/save_figure.html">Save figures to files</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://github.com/neilstats/ckbplotr/releases/latest">Latest</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/neilstats/ckbplotr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>More with shape plots</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/neilstats/ckbplotr/blob/HEAD/vignettes/shape_plot.Rmd" class="external-link"><code>vignettes/shape_plot.Rmd</code></a></small>
      <div class="d-none name"><code>shape_plot.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="log-scale">Log scale<a class="anchor" aria-label="anchor" href="#log-scale"></a>
</h2>
<p>Set the <code>logscale</code> argument to true to use a log scale on the vertical axis. If your estimates and standard errors are on the log scale (e.g. log hazard ratios), then set <code>exponentiate</code> to true. This will plot exp(estimates) and use a log scale for the axis (if <code>logscale</code> is not set).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/shape_plot.html">shape_plot</a></span><span class="op">(</span><span class="va">ckbplotr_shape_data</span><span class="op">[</span><span class="va">ckbplotr_shape_data</span><span class="op">$</span><span class="va">is_female</span> <span class="op">==</span> <span class="fl">0</span>,<span class="op">]</span>,</span>
<span>           col.x        <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>           col.estimate <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           col.stderr   <span class="op">=</span> <span class="st">"se"</span>,</span>
<span>           col.n        <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>           xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>           ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>           ybreaks      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>           scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           title        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           logscale     <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="shape_plot_files/figure-html/log-scale-1.png" width="50%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="using-groups">Using groups<a class="anchor" aria-label="anchor" href="#using-groups"></a>
</h2>
<p>The <code>col.group</code> argument can be supplied to plot results for different groups (using shades of grey for the fill colour). (Set <code>ciunder</code> to <code>TRUE</code> so that the confidence interval lines are hidden behind behind the point estimate squares.) Use the <code>legend.position</code> to set the legend position.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/shape_plot.html">shape_plot</a></span><span class="op">(</span><span class="va">ckbplotr_shape_data</span>,</span>
<span>           col.x        <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>           col.estimate <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           col.stderr   <span class="op">=</span> <span class="st">"se"</span>,</span>
<span>           col.n        <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>           col.group    <span class="op">=</span> <span class="st">"is_female"</span>,</span>
<span>           xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>           ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>           scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           title        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           ciunder      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="shape_plot_files/figure-html/groups-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="section level3">
<h3 id="labelling-groups">Labelling groups<a class="anchor" aria-label="anchor" href="#labelling-groups"></a>
</h3>
<p>To label points directly, you could add a <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text()</a></code> to the plot:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_to_plot</span> <span class="op">&lt;-</span> <span class="va">ckbplotr_shape_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>is_female <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">is_female</span>,</span>
<span>                                   levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>                                   labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Men"</span>, <span class="st">"Women"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">shape_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/shape_plot.html">shape_plot</a></span><span class="op">(</span><span class="va">data_to_plot</span>,</span>
<span>                         col.x        <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>                         col.estimate <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>                         col.stderr   <span class="op">=</span> <span class="st">"se"</span>,</span>
<span>                         col.n        <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>                         col.group    <span class="op">=</span> <span class="st">"is_female"</span>,</span>
<span>                         xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>                         ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                         scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         title        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                         ciunder      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>                         printplot    <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">shape_plot</span><span class="op">$</span><span class="va">plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">is_female</span><span class="op">)</span>,</span>
<span>            hjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>            nudge_x <span class="op">=</span> <span class="fl">2.5</span>,</span>
<span>            data <span class="op">=</span> <span class="op">~</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">is_female</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rf</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">rf</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="shape_plot_files/figure-html/group-labels-1.png" width="50%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="adding-lines">Adding lines<a class="anchor" aria-label="anchor" href="#adding-lines"></a>
</h2>
<p>The <code>lines</code> argument will add lines (linear fit through estimates on plotted scale, weighted by inverse variance) for each group.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/shape_plot.html">shape_plot</a></span><span class="op">(</span><span class="va">ckbplotr_shape_data</span>,</span>
<span>           col.x        <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>           col.estimate <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           col.stderr   <span class="op">=</span> <span class="st">"se"</span>,</span>
<span>           col.n        <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>           col.group    <span class="op">=</span> <span class="st">"is_female"</span>,</span>
<span>           xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>           ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>           scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           title        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           ciunder      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           lines        <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="shape_plot_files/figure-html/lines-1.png" width="50%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="setting-aesthetics">Setting aesthetics<a class="anchor" aria-label="anchor" href="#setting-aesthetics"></a>
</h2>
<p>The shape and fill colour of points, and colour of points and confidence interval lines can be set overall or on a per-point basis. This is done by setting arguments <code>shape</code>, <code>colour</code>, <code>cicolour</code>, <code>fill</code>, and <code>ciunder</code> to appropriate values, or to the name of a column containing values for each point.</p>
<p>The argument/columns, what they control, and the type:</p>
<table class="table">
<thead><tr class="header">
<th>argument</th>
<th>controls</th>
<th>type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>shape</td>
<td>plotting character for points</td>
<td>integer</td>
</tr>
<tr class="even">
<td>colour</td>
<td>colour of points</td>
<td>character</td>
</tr>
<tr class="odd">
<td>cicolour</td>
<td>colour of CI lines</td>
<td>character</td>
</tr>
<tr class="even">
<td>fill</td>
<td>fill colour of points</td>
<td>character</td>
</tr>
<tr class="odd">
<td>ciunder</td>
<td>if the CI line should be plotted before the point</td>
<td>logical</td>
</tr>
</tbody>
</table>
<p>(Note that the approach for using columns to specify colours and shapes in this package does not make use of the automatic scales available in ggplot. We recommend you take a look at the ggplot2 documentation for better examples if you want to write ggplot2 code.)</p>
<div class="section level3">
<h3 id="using-values">Using values<a class="anchor" aria-label="anchor" href="#using-values"></a>
</h3>
<p>If the argument doesn’t match the name of a column in the data, then the value will be used for all points.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/shape_plot.html">shape_plot</a></span><span class="op">(</span><span class="va">ckbplotr_shape_data</span>,</span>
<span>           col.x        <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>           col.estimate <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           col.stderr   <span class="op">=</span> <span class="st">"se"</span>,</span>
<span>           col.n        <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>           xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>           ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>           scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           title        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           ciunder      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           shape        <span class="op">=</span> <span class="fl">23</span>,</span>
<span>           colour       <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>           fill         <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>           cicolour     <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<p><img src="shape_plot_files/figure-html/aesthetics-with-values-1.png" width="50%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="using-columns">Using columns<a class="anchor" aria-label="anchor" href="#using-columns"></a>
</h3>
<p>If the argument matches a column name, then the values in the column will be used.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ckbplotr_shape_data</span><span class="op">$</span><span class="va">fillcol</span> <span class="op">&lt;-</span> <span class="st">"black"</span></span>
<span><span class="va">ckbplotr_shape_data</span><span class="op">[</span><span class="va">ckbplotr_shape_data</span><span class="op">$</span><span class="va">is_female</span> <span class="op">==</span> <span class="fl">1</span>,<span class="op">]</span><span class="op">$</span><span class="va">fillcol</span> <span class="op">&lt;-</span> <span class="st">"orange"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/shape_plot.html">shape_plot</a></span><span class="op">(</span><span class="va">ckbplotr_shape_data</span>,</span>
<span>           col.x        <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>           col.estimate <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           col.stderr   <span class="op">=</span> <span class="st">"se"</span>,</span>
<span>           col.n        <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>           xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>           ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>           scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           title        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           ciunder      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           colour       <span class="op">=</span> <span class="st">"fillcol"</span>,</span>
<span>           fill         <span class="op">=</span> <span class="st">"fillcol"</span><span class="op">)</span></span></code></pre></div>
<p><img src="shape_plot_files/figure-html/aesthetics-with-columns-1.png" width="50%" style="display: block; margin: auto;"></p>
<p>Specify a column for <code>cicolour</code> is useful for changing the colour of confidence interval lines that would otherwise be hidden.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ckbplotr_shape_data</span><span class="op">$</span><span class="va">cicol</span> <span class="op">&lt;-</span> <span class="st">"black"</span></span>
<span><span class="va">ckbplotr_shape_data</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span><span class="op">$</span><span class="va">cicol</span> <span class="op">&lt;-</span> <span class="st">"white"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/shape_plot.html">shape_plot</a></span><span class="op">(</span><span class="va">ckbplotr_shape_data</span>,</span>
<span>           col.x        <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>           col.estimate <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           col.stderr   <span class="op">=</span> <span class="st">"se"</span>,</span>
<span>           col.n        <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>           xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">50</span><span class="op">)</span>,</span>
<span>           ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>           scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           title        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           pointsize    <span class="op">=</span> <span class="fl">7</span>,</span>
<span>           cicolour     <span class="op">=</span> <span class="st">"cicol"</span><span class="op">)</span></span></code></pre></div>
<p><img src="shape_plot_files/figure-html/small-ci-1.png" width="50%" style="display: block; margin: auto;"></p>
<p>Note that the size of boxes depends on <code>pointsize</code>, but the true length of confidence interval lines depends on the size at which the plot is displayed or saved. So, first save your plot as an image then go back to change the colour of confidence interval lines as needed.</p>
</div>
</div>
<div class="section level2">
<h2 id="categorical-risk-factor">Categorical risk factor<a class="anchor" aria-label="anchor" href="#categorical-risk-factor"></a>
</h2>
<p>The risk factor can be a factor. In this case, the x-axis coordinates are 1, 2, 3, .. so suitable x-axis limits are 0.5 and number of categories plus 0.5. You may need to add position arguments so that points, intervals and text do not overlap:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ckbplotr_shape_data</span><span class="op">$</span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>  <span class="st">"A"</span>,   <span class="st">"B"</span>,   <span class="st">"C"</span>,   <span class="st">"D"</span>, <span class="st">"A"</span>,   <span class="st">"B"</span>,   <span class="st">"C"</span>,  <span class="st">"D"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/shape_plot.html">shape_plot</a></span><span class="op">(</span><span class="va">ckbplotr_shape_data</span>,</span>
<span>           col.x        <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>           col.estimate <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           col.stderr   <span class="op">=</span> <span class="st">"se"</span>,</span>
<span>           col.n        <span class="op">=</span> <span class="st">"n"</span>,</span>
<span>           col.group    <span class="op">=</span> <span class="st">"is_female"</span>,</span>
<span>           xlims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">4.5</span><span class="op">)</span>,</span>
<span>           ylims        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>           scalepoints  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           title        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           ciunder      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           addarg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>point     <span class="op">=</span> <span class="st">"position = position_dodge(width = 0.5)"</span>,</span>
<span>                         ci        <span class="op">=</span> <span class="st">"position = position_dodge(width = 0.5)"</span>,</span>
<span>                         n         <span class="op">=</span> <span class="st">"position = position_dodge(width = 0.5)"</span>,</span>
<span>                         estimates <span class="op">=</span> <span class="st">"position = position_dodge(width = 0.5)"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="shape_plot_files/figure-html/unnamed-chunk-2-1.png" width="50%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="stroke">Stroke<a class="anchor" aria-label="anchor" href="#stroke"></a>
</h2>
<p>The <code>stroke</code> argument sets the stroke aesthetic for plotted shapes. See <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html" class="external-link uri">https://ggplot2.tidyverse.org/articles/ggplot2-specs.html</a> for more details. The stroke size adds to total size of a shape, so unless <code>stroke = 0</code> the scaling of size by inverse variance will be slightly inaccurate (but there are probably more important things to worry about).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Neil Wright.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
